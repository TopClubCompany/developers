<%= content_tag(:div, :class => "fileupload #{multiple ? 'many_assets' : 'one_asset'}",
                :id => element_id, :data => {:assoc => attribute_name}) do %>
  <div class="gray-blocks">
    <div>
      <div class="fileupload-drop-area"><span><%= t('admin.fileupload.drop_here') %></span></div>

      <div class="fileupload-list ill-bl galery">
        <%= render :partial => "admin/fileupload/#{asset_render_template}", :collection => assets %>
      </div>
      <div class="file-types">
        <span class="fileupload-button">
          <button type="button" class="btn btn-primary"><i class="icon-file icon-white"></i> <%= t("admin.fileupload.button#{'s' if multiple}") %></button>
        </span>

        <div class="type-info">
          <span><%= file_title %>. <%= t('admin.fileupload.max_size') %>:</span><strong><%= file_max_size %> MB</strong>
        </div>
      </div>
    </div>
  </div>
<% end %>

<script type="text/javascript">
  $(document).ready(function () {
    var upl = new qq.FileUploaderInput(<%= raw script_options %>);
    upl._setupDragDrop();
    Manage.init_assets('<%= element_id %>', '<%= sort_admin_assets_path(:klass => asset_klass) %>', <%= multiple ? 'true' : 'false' %>);
  });
</script>
